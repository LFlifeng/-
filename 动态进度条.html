<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>动态进度条</title>
    <style>
        .progress {
            width: 500px;
            height: 40px;
            margin: 100px auto;
            background-color: yellow;
            border-radius: 10px;
            background-image: linear-gradient(135deg,
                green 25%,
                transparent 25%,
                transparent 50%,
                green 50%,
                green 75%,
                transparent 75%,
                transparent 100%);
            background-size: 40px 40px;
            background-position: 0 0;
            animation: move 1.5s linear infinite;
        }

        /* 动画序列 */
        @keyframes move {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 40px 0;
            }
        }
    </style>
</head>

<body>
    <div class="progress"></div>
    <select name="" id="dis">
        <option value="1">不禁用</option>
        <option value="0">禁用</option>
    </select>
    <input type="text" id="input">
</body>
<script>
    var dis = document.getElementById('dis');
    var input = document.getElementById('input')
    dis.onchange = function () {
        for (var i = 0; i < dis.children.length; i++) {
            if (dis.children[i].value === "0") {
                input.setAttribute('disabled', 'disabled');
            }
            if (dis.children[i].value === "1") {
                input.setAttribute('disabled', '');
            }
        }
    }
    var a = 1;
    function array(){
        var a = 2;
        // console.log(a);
        return a;
    }
    array();
    console.log(a);
    //Promise
    //回调方式
    // function add(getX,getY,cb){
    //     var x,y;
    //     getX(function(xVal){
    //         x = xVal;
    //         if(y != undefined){
    //             cb(x+y);
    //         }
    //     });
    //     getY(function(yVal){
    //         y = yVal;
    //         if(x != undefined){
    //             cb(x+y);
    //         }
    //     });
    // }
    // add(getX,getY,function(sum){
    //     console.log(sum);
    // });
    //promise值
    // function add(xPromise,yPromise){
    //     return Promise.all([xPromise,yPromise])
    //                     .then(function(values){
    //                         return values[0] + values[1];
    //                     }) ;
    // }
    // add(fetchX(),fetchY())
    //     .then(function(sum){
    //         console.log(sum);
    //     });
    //
    // var p = new Promise(function(res,rej){
    //     res("B");
    // })
    // p.then(function(){
    //     p.then(function(){
    //         console.log("C");
    //     });
    //     console.log("A");
    // });
    // p.then(function(){
    //     console.log("B");
    // });
    // //Promise 调度技巧
    // var p3 = new Promise(function(res,rjb){
    //     res('B');
    // });
    // var p1 = new Promise(function(res,rjb){
    //     res(p3);
    // });
    // var p2 = new Promise(function(res,rjb){
    //     res('A');
    // });
    // p1.then(function(v){
    //     console.log(v);
    // });
    // p2.then(function(v){
    //     console.log(v);
    // });
    var p4 = Promise.resolve(21);
    var p5 = p4.then(function(v){
        console.log(v);
        return v*2;
    });
    p5.then(function(v){
        console.log(v);
    });
    function delay(time){
        return new Promise(function(resolve,reject){
            setTimeout(resolve,reject);
        });
    }
    delay(100)
        .then(function STEP2(){
            console.log("step 2 (after 100ms)");
            return delay(200);
        })
        .then(function STEP3(){
            console.log("step 3 (after another 200ms)");
        })
        .then(function STEP4(){
            console.log("step 4 (next Job)");
            return delay(50);
        })
        .then(function STEP5(){
            console.log("step 5 (after another 50ms)");
        });
    //构造Ajax请求   假定ajax({url},{callback})存在
    function request(url){
        return new Promise(function(resolve,reject){
            ajax(url,resolve);
        });
    }
    request("http://some.url.1/")
    .then(function(response1){
        return request("http://some.url.2/?v=" + response1);
    })
    .then(function(response2){
        console.log(response2);
    });
</script>

</html>