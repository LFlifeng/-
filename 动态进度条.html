<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>动态进度条</title>
    <style>
        .progress {
            width: 500px;
            height: 40px;
            margin: 100px auto;
            background-color: yellow;
            border-radius: 10px;
            background-image: linear-gradient(135deg,
                green 25%,
                transparent 25%,
                transparent 50%,
                green 50%,
                green 75%,
                transparent 75%,
                transparent 100%);
            background-size: 40px 40px;
            background-position: 0 0;
            animation: move 1.5s linear infinite;
        }

        /* 动画序列 */
        @keyframes move {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 40px 0;
            }
        }
    </style>
</head>

<body>
    <div class="progress"></div>
    <select name="" id="dis">
        <option value="1">不禁用</option>
        <option value="0">禁用</option>
    </select>
    <input type="text" id="input">
</body>
<script>
    var dis = document.getElementById('dis');
    var input = document.getElementById('input')
    dis.onchange = function () {
        for (var i = 0; i < dis.children.length; i++) {
            if (dis.children[i].value === "0") {
                input.setAttribute('disabled', 'disabled');
            }
            if (dis.children[i].value === "1") {
                input.setAttribute('disabled', '');
            }
        }
    }
    var a = 1;
    function array(){
        var a = 2;
        // console.log(a);
        return a;
    }
    array();
    console.log(a);
    //Promise
    //回调方式
    // function add(getX,getY,cb){
    //     var x,y;
    //     getX(function(xVal){
    //         x = xVal;
    //         if(y != undefined){
    //             cb(x+y);
    //         }
    //     });
    //     getY(function(yVal){
    //         y = yVal;
    //         if(x != undefined){
    //             cb(x+y);
    //         }
    //     });
    // }
    // add(getX,getY,function(sum){
    //     console.log(sum);
    // });
    //promise值
    // function add(xPromise,yPromise){
    //     return Promise.all([xPromise,yPromise])
    //                     .then(function(values){
    //                         return values[0] + values[1];
    //                     }) ;
    // }
    // add(fetchX(),fetchY())
    //     .then(function(sum){
    //         console.log(sum);
    //     });
    //
    // var p = new Promise(function(res,rej){
    //     res("B");
    // })
    // p.then(function(){
    //     p.then(function(){
    //         console.log("C");
    //     });
    //     console.log("A");
    // });
    // p.then(function(){
    //     console.log("B");
    // });
    // //Promise 调度技巧
    // var p3 = new Promise(function(res,rjb){
    //     res('B');
    // });
    // var p1 = new Promise(function(res,rjb){
    //     res(p3);
    // });
    // var p2 = new Promise(function(res,rjb){
    //     res('A');
    // });
    // p1.then(function(v){
    //     console.log(v);
    // });
    // p2.then(function(v){
    //     console.log(v);
    // });
    // var p4 = Promise.resolve(21);
    // var p5 = p4.then(function(v){
    //     console.log(v);
    //     return v*2;
    // });
    // p5.then(function(v){
    //     console.log(v);
    // });
    // function delay(time){
    //     return new Promise(function(resolve,reject){
    //         setTimeout(resolve,reject);
    //     });
    // }
    // delay(100)
    //     .then(function STEP2(){
    //         console.log("step 2 (after 100ms)");
    //         return delay(200);
    //     })
    //     .then(function STEP3(){
    //         console.log("step 3 (after another 200ms)");
    //     })
    //     .then(function STEP4(){
    //         console.log("step 4 (next Job)");
    //         return delay(50);
    //     })
    //     .then(function STEP5(){
    //         console.log("step 5 (after another 50ms)");
    //     });
    // //构造Ajax请求   假定ajax({url},{callback})存在[]
    // function request(url){
    //     return new Promise(function(resolve,reject){
    //         // ajax(url,resolve);
    //     });
    // }
    // request("http://some.url.1/")
    // .then(function(response1){
    //     return request("http://some.url.2/?v=" + response1);
    // })
    // .then(function(response2){
    //     console.log(response2);
    // });
    // // Promise.all()
    // var p1 = request("http://some.url.1/");
    // var p2 = request("http://some.url.2/");
    // Promise.all([p1,p2])
    // .then(function(msgs){
    //     return request(
    //         "http://some.url.3/?v="+msgs.join(",")
    //     );
    // })
    // .then(function(msg){
    //     console.log(msg);
    // });
    // // Promise.race()
    // var p1 = request("http://some.url.1/");
    // var p2 = request("http://some.url.2/");
    // Promise.race([p1,p2])
    // .then(function(msg){
    //     return request(
    //         "http://some.url.3/?v="+msg
    //     );
    // })
    // .then(function(msg){
    //     console.log(msg);
    // });
    // Promise.race([
    //     foo(),//支持promise的函数  未定义
    //     timeoutPromise(3000)
    // ])
    // .then(
    //     function(){
    //         //foo()按时完成
    //     },
    //     function(err){
    //         //要么foo()被拒绝，要么只是没能够按时完成，因此要查看err了解具体原因
    //     }
    // );
    // finally
    // var p = Promise.resolve(42);
    // p.then(something)
    // .finally(cleanup)
    // .then(another)
    // .finally(clearup);
    // if(!Promise.observe){
    //     Promise.observe = function(pr,cb){
    //         //观察pr的决议
    //         pr.then(
    //             function fulfilled (msg){
    //                 Promise.resolve(msg).then(cb);
    //             },
    //             function rejected(err){
    //                 Promise.resolve(err).then(cb);
    //             }
    //         );
    //         return pr;
    //     };
    // }
    var x=1;
    function foo(){
        x++;
        bar();
        console.log("x:",x);
    }
    function bar(){
        x++;
    }
    foo();
    //生成器部分
    var y=1;
    function *fooo(){
        y++;
        yield;//暂停
        console.log("y:",y);
    }
    function barr(){
        y++;
    }
    var it = fooo();
    it.next();//启动fooo()
    y;
    barr();
    y;
    it.next();
    //输入和输出
    function *fo(x,y){
        return x*y;
    }
    var its = fo(6,7);
    var resb = its.next();
    console.log(resb.value);
    //迭代消息传递
    function *boo(x){
        var y = x*(yield);
        return y;
    }
    var is = boo(6);
    //启动boo()
    is.next();
    var ree = is.next(8);
    console.log(ree.value);
    //多个迭代器
    function *coo(){
        var x = yield 2;
        z++;
        var y = yield(x*z);
        console.log(x,y,z);
    }
    var z = 1;
    var it1 = coo();
    var it2 = coo();
    var val1 = it1.next().value;
    var val2 = it2.next().value;
    val1 = it1.next(val2*10).value;
    val2 = it2.next(val1*5).value;
    it1.next(val2/2);
    it2.next(val1/4); 
</script>

</html>